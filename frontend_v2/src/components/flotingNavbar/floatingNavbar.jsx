import React, { useEffect, useState } from "react";
import "./flotingNavbar.css";
import { useLocation, useNavigate, useNavigation } from "react-router";
import UserDetailsPopup from "../userDetailsPopup/UserDetailsPopup";

const FloatingNavbar = () => {
  const navigate = useNavigate();
  const location = useLocation();
  const [showProfile, setShowProfile] = useState(false);
  const [activeMenu, setActiveMenu] = useState("home");

  const searchHandler = () => {
    setActiveMenu("search");
    const section = document.getElementById("search-component");
    section.scrollIntoView({ behavior: "smooth" });
  };
  const homeHandler = () => {
    setActiveMenu("home");
    navigate("/home");
  };
  const activitesHandler = () => {
    setActiveMenu("activites");
    navigate("/home#activites");
  };

  const profileHandler = () => {
    setActiveMenu("profile");
    setShowProfile(true);
  };

  useEffect(() => {
    const hash = location.hash;
    if (hash) {
      const section = document.querySelector(hash);
      if (section) {
        section.scrollIntoView({ behavior: "smooth" });
      }
    }
  }, [location]);

  return (
    <div className="floting-navbar-container">
      <button className="f-nav-btn" onClick={homeHandler}>
        <svg
          width={25}
          height={25}
          viewBox="0 0 25 25"
          fill="none"
          color={activeMenu === "home" ? "#ACC29E" : "black"}
          xmlns="http://www.w3.org/2000/svg"
        >
          <path
            fillRule="evenodd"
            clipRule="evenodd"
            d="M13.8445 0.729392C13.8448 0.729709 13.8452 0.730027 13.8456 0.730345L23.8365 9.37501C23.8364 9.37498 23.8365 9.37504 23.8365 9.37501C25.2169 10.569 24.4017 12.8826 22.5378 12.8826H21.7147V21.3395C21.7147 22.9518 20.4187 24.2432 18.8062 24.2432H15.3909C15.042 24.2432 14.7593 23.9604 14.7593 23.6116C14.7593 23.2628 15.042 22.98 15.3909 22.98H18.8062C19.7236 22.98 20.4516 22.2517 20.4516 21.3395V12.2511C20.4516 11.9022 20.7343 11.6195 21.0831 11.6195H22.5378C23.2038 11.6195 23.527 10.7774 23.0102 10.3304L13.0169 1.6837L13.0148 1.68184C12.7468 1.44782 12.3427 1.44782 12.0746 1.68184L12.0725 1.6837L2.07936 10.3303C1.56252 10.7773 1.88557 11.6195 2.55157 11.6195H4.00627C4.35508 11.6195 4.63785 11.9022 4.63785 12.2511C4.63785 12.5999 4.35508 12.8826 4.00627 12.8826H2.55157C0.687721 12.8826 -0.127583 10.5691 1.25285 9.37511C1.25281 9.37514 1.25289 9.37507 1.25285 9.37511L11.2438 0.730345C11.2442 0.730003 11.2446 0.729661 11.245 0.72932C11.9886 0.0810882 13.1009 0.081112 13.8445 0.729392Z"
            fill="currentColor"
          />
          <path
            fillRule="evenodd"
            clipRule="evenodd"
            d="M3.375 12.2512C3.375 11.9024 3.65777 11.6196 4.00658 11.6196H21.0835C21.4323 11.6196 21.715 11.9024 21.715 12.2512C21.715 12.6 21.4323 12.8828 21.0835 12.8828H4.63816V21.3396C4.63816 22.2518 5.36609 22.9802 6.2835 22.9802H15.3912C15.74 22.9802 16.0227 23.2629 16.0227 23.6117C16.0227 23.9606 15.74 24.2433 15.3912 24.2433H6.2835C4.67099 24.2433 3.375 22.952 3.375 21.3396V12.2512Z"
            fill="currentColor"
          />
          <path
            fillRule="evenodd"
            clipRule="evenodd"
            d="M9.00391 19.3199C9.00391 18.2125 9.92041 17.2998 11.0269 17.2998H13.9996C15.1061 17.2998 16.0226 18.2125 16.0226 19.3199V23.6116C16.0226 23.9605 15.7398 24.2432 15.391 24.2432C15.0422 24.2432 14.7594 23.9605 14.7594 23.6116V19.3199C14.7594 18.9126 14.411 18.563 13.9996 18.563H11.0269C10.6155 18.563 10.2671 18.9126 10.2671 19.3199V23.6116C10.2671 23.9605 9.9843 24.2432 9.63549 24.2432C9.28667 24.2432 9.00391 23.9605 9.00391 23.6116V19.3199Z"
            fill="currentColor"
          />
        </svg>
      </button>
      <button className="f-nav-btn" onClick={searchHandler}>
        <svg
          width={25}
          height={25}
          viewBox="0 0 25 25"
          fill="none"
          color={activeMenu === "search" ? "#ACC29E" : "black"}
          xmlns="http://www.w3.org/2000/svg"
        >
          <path
            fillRule="evenodd"
            clipRule="evenodd"
            d="M10.9494 1.50632C5.89164 1.50632 1.79148 5.60645 1.79148 10.6642C1.79148 15.722 5.89164 19.8221 10.9494 19.8221C16.0072 19.8221 20.1073 15.722 20.1073 10.6642C20.1073 5.60645 16.0072 1.50632 10.9494 1.50632ZM0.52832 10.6642C0.52832 4.90883 5.19403 0.243164 10.9494 0.243164C16.7048 0.243164 21.3704 4.90883 21.3704 10.6642C21.3704 16.4196 16.7048 21.0853 10.9494 21.0853C5.19403 21.0853 0.52832 16.4196 0.52832 10.6642Z"
            fill="currentColor"
          />
          <path
            fillRule="evenodd"
            clipRule="evenodd"
            d="M17.766 17.4809C18.0127 17.2342 18.4126 17.2342 18.6592 17.4809L24.3434 23.1651C24.5901 23.4117 24.5901 23.8116 24.3434 24.0583C24.0968 24.3049 23.6969 24.3049 23.4503 24.0583L17.766 18.3741C17.5194 18.1274 17.5194 17.7275 17.766 17.4809Z"
            fill="currentColor"
          />
        </svg>
      </button>
      <button className="f-nav-btn" onClick={activitesHandler}>
        <svg
          width={24}
          height={25}
          viewBox="0 0 24 25"
          color={activeMenu === "activites" ? "#ACC29E" : "black"}
          xmlns="http://www.w3.org/2000/svg"
        >
          <path
            fillRule="evenodd"
            clipRule="evenodd"
            d="M12 1.50632C6.07021 1.50632 1.26316 6.31337 1.26316 12.2432C1.26316 18.173 6.07021 22.98 12 22.98C17.9298 22.98 22.7368 18.173 22.7368 12.2432C22.7368 6.31337 17.9298 1.50632 12 1.50632ZM0 12.2432C0 5.61575 5.37258 0.243164 12 0.243164C18.6274 0.243164 24 5.61575 24 12.2432C24 18.8706 18.6274 24.2432 12 24.2432C5.37258 24.2432 0 18.8706 0 12.2432Z"
            fill="currentColor"
          />
          <path
            fillRule="evenodd"
            clipRule="evenodd"
            d="M9.17995 8.01024C9.29297 7.81559 9.50104 7.6958 9.72613 7.6958H14.2103C14.4354 7.6958 14.6435 7.81559 14.7565 8.01024L17.0302 11.926C17.144 12.1221 17.144 12.3642 17.0302 12.5603L14.7565 16.4761C14.6435 16.6707 14.4354 16.7905 14.2103 16.7905H9.72613C9.50104 16.7905 9.29297 16.6707 9.17995 16.4761L6.9062 12.5603C6.79233 12.3642 6.79233 12.1221 6.9062 11.926L9.17995 8.01024ZM10.0897 8.95896L8.18271 12.2432L10.0897 15.5274H13.8467L15.7537 12.2432L13.8467 8.95896H10.0897Z"
            fill="currentColor"
          />
          <path
            fillRule="evenodd"
            clipRule="evenodd"
            d="M9.17995 8.01024C9.29297 7.81559 9.50104 7.6958 9.72613 7.6958H14.2103C14.4354 7.6958 14.6435 7.81559 14.7565 8.01024L17.0302 11.926C17.144 12.1221 17.144 12.3642 17.0302 12.5603L14.7565 16.4761C14.6435 16.6707 14.4354 16.7905 14.2103 16.7905H9.72613C9.50104 16.7905 9.29297 16.6707 9.17995 16.4761L6.9062 12.5603C6.79233 12.3642 6.79233 12.1221 6.9062 11.926L9.17995 8.01024ZM10.0897 8.95896L8.18271 12.2432L10.0897 15.5274H13.8467L15.7537 12.2432L13.8467 8.95896H10.0897Z"
            fill="currentColor"
          />
          <path
            fillRule="evenodd"
            clipRule="evenodd"
            d="M9.17995 15.8418C9.29297 15.6471 9.50104 15.5273 9.72613 15.5273H14.2103C14.4354 15.5273 14.6435 15.6471 14.7565 15.8418L17.0302 19.7576C17.143 19.9519 17.1441 20.1916 17.033 20.3869L15.2014 23.608C15.029 23.9112 14.6434 24.0172 14.3402 23.8448C14.037 23.6724 13.931 23.2868 14.1034 22.9836L15.7556 20.078L13.8467 16.7905H10.0897L8.1808 20.078L9.833 22.9836C10.0054 23.2868 9.89938 23.6724 9.59617 23.8448C9.29295 24.0172 8.90737 23.9112 8.73495 23.608L6.90335 20.3869C6.79228 20.1916 6.79336 19.9519 6.9062 19.7576L9.17995 15.8418Z"
            fill="currentColor"
          />
          <path
            fillRule="evenodd"
            clipRule="evenodd"
            d="M15.9382 11.9263C16.0512 11.7316 16.2593 11.6118 16.4843 11.6118H21.0317C21.2588 11.6118 21.4684 11.7338 21.5807 11.9312L23.4123 15.1522C23.5847 15.4555 23.4787 15.841 23.1755 16.0135C22.8723 16.1859 22.4867 16.0798 22.3143 15.7766L20.6643 12.875H16.848L14.941 16.1592L16.848 19.4434H20.2107C20.5595 19.4434 20.8423 19.7261 20.8423 20.075C20.8423 20.4238 20.5595 20.7065 20.2107 20.7065H16.4843C16.2593 20.7065 16.0512 20.5867 15.9382 20.3921L13.6645 16.4763C13.5506 16.2802 13.5506 16.0381 13.6645 15.842L15.9382 11.9263Z"
            fill="currentColor"
          />
          <path
            fillRule="evenodd"
            clipRule="evenodd"
            d="M15.936 4.03503C16.0484 3.83824 16.2577 3.7168 16.4843 3.7168H20.2107C20.5595 3.7168 20.8423 3.99956 20.8423 4.34838C20.8423 4.69719 20.5595 4.97995 20.2107 4.97995H16.8509L14.9395 8.32479L16.848 11.6115H20.6643L22.3143 8.70985C22.4867 8.40663 22.8723 8.30059 23.1755 8.47301C23.4787 8.64543 23.5847 9.03101 23.4123 9.33423L21.5807 12.5553C21.4684 12.7527 21.2588 12.8747 21.0317 12.8747H16.4843C16.2593 12.8747 16.0512 12.7549 15.9382 12.5602L13.6645 8.64445C13.5514 8.44971 13.5506 8.20949 13.6623 8.01397L15.936 4.03503Z"
            fill="currentColor"
          />
          <path
            fillRule="evenodd"
            clipRule="evenodd"
            d="M2.29866 11.9217C2.41234 11.7296 2.61897 11.6118 2.84218 11.6118H7.38952C7.61734 11.6118 7.82751 11.7345 7.93951 11.9329L10.15 15.8487C10.2588 16.0414 10.2588 16.2769 10.15 16.4696L7.93951 20.3854C7.82751 20.5838 7.61734 20.7065 7.38952 20.7065H3.7264C3.37759 20.7065 3.09483 20.4238 3.09483 20.075C3.09483 19.7261 3.37759 19.4434 3.7264 19.4434H7.02079L8.87478 16.1592L7.02079 12.875H3.20229L1.5541 15.6598C1.37645 15.96 0.989082 16.0593 0.688904 15.8816C0.388726 15.704 0.289405 15.3166 0.467064 15.0164L2.29866 11.9217Z"
            fill="currentColor"
          />
          <path
            fillRule="evenodd"
            clipRule="evenodd"
            d="M3.09483 4.34838C3.09483 3.99956 3.37759 3.7168 3.7264 3.7168H7.38952C7.61888 3.7168 7.83022 3.84115 7.94161 4.04165L10.1521 8.02059C10.2589 8.21268 10.2581 8.44644 10.15 8.6378L7.93951 12.5536C7.82751 12.752 7.61734 12.8747 7.38952 12.8747H2.84218C2.61897 12.8747 2.41234 12.7569 2.29866 12.5648L0.467063 9.47004C0.289405 9.16986 0.388728 8.7825 0.688907 8.60484C0.989086 8.42718 1.37645 8.5265 1.55411 8.82668L3.20229 11.6115H7.02079L8.87617 8.32485L7.01789 4.97995H3.7264C3.37759 4.97995 3.09483 4.69719 3.09483 4.34838Z"
            fill="currentColor"
          />
          <path
            fillRule="evenodd"
            clipRule="evenodd"
            d="M9.60085 0.644431C9.90258 0.819437 10.0053 1.20591 9.83031 1.50764L8.18115 4.351L10.0926 7.69602H13.8438L15.7552 4.35101L14.1061 1.50764C13.9311 1.20591 14.0338 0.819437 14.3355 0.644431C14.6372 0.469425 15.0237 0.572157 15.1987 0.873889L17.0303 4.03178C17.1433 4.22649 17.144 4.46658 17.0324 4.66201L14.7587 8.64095C14.6462 8.83774 14.437 8.95918 14.2103 8.95918H9.72613C9.49948 8.95918 9.29021 8.83774 9.17777 8.64096L6.90402 4.66202C6.79234 4.46659 6.79311 4.22649 6.90605 4.03178L8.73764 0.873889C8.91265 0.572157 9.29912 0.469425 9.60085 0.644431Z"
            fill="currentColor"
          />
        </svg>
      </button>
      <button className="f-nav-btn" onClick={profileHandler}>
        <svg
          width={24}
          height={25}
          viewBox="0 0 24 25"
          fill="none"
          color={activeMenu === "profile" ? "#ACC29E" : "black"}
          xmlns="http://www.w3.org/2000/svg"
        >
          <path
            fillRule="evenodd"
            clipRule="evenodd"
            d="M0 21.6535C0 18.7784 2.30382 16.4746 5.17893 16.4746H18.8209C21.6961 16.4746 23.9999 18.7784 23.9999 21.6535V23.6114C23.9999 23.9602 23.7171 24.243 23.3683 24.243C23.0195 24.243 22.7367 23.9602 22.7367 23.6114V21.6535C22.7367 19.476 20.9984 17.7378 18.8209 17.7378H5.17893C3.00143 17.7378 1.26315 19.476 1.26315 21.6535V23.6114C1.26315 23.9602 0.980385 24.243 0.631576 24.243C0.282766 24.243 0 23.9602 0 23.6114V21.6535Z"
            fill="currentColor"
          />
          <path
            fillRule="evenodd"
            clipRule="evenodd"
            d="M11.9998 1.50632C8.83144 1.50632 6.25241 4.10188 6.25241 7.31681C6.25241 10.5317 8.83144 13.1273 11.9998 13.1273C15.1681 13.1273 17.7471 10.5317 17.7471 7.31681C17.7471 4.10188 15.1681 1.50632 11.9998 1.50632ZM4.98926 7.31681C4.98926 3.41602 8.12211 0.243164 11.9998 0.243164C15.8774 0.243164 19.0102 3.41602 19.0102 7.31681C19.0102 11.2176 15.8774 14.3905 11.9998 14.3905C8.12211 14.3905 4.98926 11.2176 4.98926 7.31681Z"
            fill="currentColor"
          />
        </svg>
      </button>
      {showProfile && (
        <UserDetailsPopup
          viewFromFloatingNav={showProfile}
          navBtnHandler={setShowProfile}
        />
      )}
    </div>
  );
};

export default FloatingNavbar;
